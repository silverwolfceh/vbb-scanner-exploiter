from http import *

class Exploiter(SW_HTTP_REQ):

	def __init__(self):
		super(Exploiter, self).__init__()
		self.params["debug_level"] = 1
		self.params["log_file"] = None
		self.params["log_file_hdl"] = None

	def setUrl(self,url):
		self.params["url"] = url

	def startExploit(self,successString):
		self.params["success"] = successString
		return true

	def setResultFile(self,filename):
		self.params["log_file"] = filename
		self.params["log_file_hdl"] = open(self.params["log_file"], "w+")
		print "Log file is set: " + self.params["log_file_hdl"].name

	def writeLog(self,msg):
		if self.params["log_file"]:
			if self.params["log_file_hdl"] == None:
				self.params["log_file_hdl"] = open(self.params["log_file"], "w+")
			self.params["log_file_hdl"].write(msg + "\n")

	def __del__(self):
		if self.params["log_file"]:
			if self.params["log_file_hdl"]:
				self.params["log_file_hdl"].close()